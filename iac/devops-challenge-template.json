{
    "Metadata": {
        "AWSToolsMetrics": {
            "IaC_Generator": "arn:aws:cloudformation:us-east-1:190623961705:generatedTemplate/1b4025f4-198f-484c-a87f-ba0638144aca"
        }
    },
    "Resources": {
        "S3Bucket00devopschallengebparaspatientrecords00uHNUx": {
            "UpdateReplacePolicy": "Retain",
            "Type": "AWS::S3::Bucket",
            "DeletionPolicy": "Delete",
            "Properties": {
                "PublicAccessBlockConfiguration": {
                    "RestrictPublicBuckets": true,
                    "IgnorePublicAcls": true,
                    "BlockPublicPolicy": true,
                    "BlockPublicAcls": true
                },
                "BucketName": "devops-challenge-bparas-patient-records",
                "OwnershipControls": {
                    "Rules": [
                        {
                            "ObjectOwnership": "BucketOwnerEnforced"
                        }
                    ]
                },
                "BucketEncryption": {
                    "ServerSideEncryptionConfiguration": [
                        {
                            "BucketKeyEnabled": true,
                            "ServerSideEncryptionByDefault": {
                                "SSEAlgorithm": "AES256"
                            }
                        }
                    ]
                }
            }
        },
        "S3BucketPolicy00devopschallengebparas00p9zHJ": {
            "UpdateReplacePolicy": "Retain",
            "Type": "AWS::S3::BucketPolicy",
            "DeletionPolicy": "Delete",
            "Properties": {
                "Bucket": {
                    "Ref": "S3Bucket00devopschallengebparas002Wd2l"
                },
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Condition": {
                                "Bool": {
                                    "aws:SecureTransport": "false"
                                }
                            },
                            "Resource": [
                                "arn:aws:s3:::devops-challenge-bparas/*",
                                "arn:aws:s3:::devops-challenge-bparas"
                            ],
                            "Action": "s3:*",
                            "Effect": "Deny",
                            "Principal": "*",
                            "Sid": "StmtDenySecureTransport"
                        }
                    ],
                    "Id": "Policy1411630465004"
                }
            }
        },
        "S3BucketPolicy00devopschallengebparaspatientrecords00Jjvyb": {
            "UpdateReplacePolicy": "Retain",
            "Type": "AWS::S3::BucketPolicy",
            "DeletionPolicy": "Delete",
            "Properties": {
                "Bucket": {
                    "Ref": "S3Bucket00devopschallengebparaspatientrecords00uHNUx"
                },
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Condition": {
                                "Bool": {
                                    "aws:SecureTransport": "false"
                                }
                            },
                            "Resource": [
                                "arn:aws:s3:::devops-challenge-bparas-patient-records/*",
                                "arn:aws:s3:::devops-challenge-bparas-patient-records"
                            ],
                            "Action": "s3:*",
                            "Effect": "Deny",
                            "Principal": "*",
                            "Sid": "StmtDenySecureTransport"
                        }
                    ],
                    "Id": "Policy1411630465004"
                }
            }
        },
        "S3Bucket00devopschallengebparas002Wd2l": {
            "UpdateReplacePolicy": "Retain",
            "Type": "AWS::S3::Bucket",
            "DeletionPolicy": "Delete",
            "Properties": {
                "PublicAccessBlockConfiguration": {
                    "RestrictPublicBuckets": true,
                    "IgnorePublicAcls": true,
                    "BlockPublicPolicy": true,
                    "BlockPublicAcls": true
                },
                "BucketName": "devops-challenge-bparas",
                "OwnershipControls": {
                    "Rules": [
                        {
                            "ObjectOwnership": "BucketOwnerEnforced"
                        }
                    ]
                },
                "BucketEncryption": {
                    "ServerSideEncryptionConfiguration": [
                        {
                            "BucketKeyEnabled": true,
                            "ServerSideEncryptionByDefault": {
                                "SSEAlgorithm": "AES256"
                            }
                        }
                    ]
                }
            }
        },
        "DynamoDBTable00patientRecords00gEtiq": {
            "UpdateReplacePolicy": "Retain",
            "Type": "AWS::DynamoDB::Table",
            "DeletionPolicy": "Delete",
            "Properties": {
                "SSESpecification": {
                    "SSEEnabled": false
                },
                "ContributorInsightsSpecification": {
                    "Enabled": false
                },
                "PointInTimeRecoverySpecification": {
                    "PointInTimeRecoveryEnabled": false
                },
                "WarmThroughput": {
                    "ReadUnitsPerSecond": 12000,
                    "WriteUnitsPerSecond": 4000
                },
                "TableName": "patientRecords",
                "AttributeDefinitions": [
                    {
                        "AttributeType": "S",
                        "AttributeName": "date_time"
                    },
                    {
                        "AttributeType": "S",
                        "AttributeName": "first_name"
                    },
                    {
                        "AttributeType": "S",
                        "AttributeName": "last_name"
                    },
                    {
                        "AttributeType": "S",
                        "AttributeName": "medical_record_number"
                    }
                ],
                "BillingMode": "PAY_PER_REQUEST",
                "GlobalSecondaryIndexes": [
                    {
                        "IndexName": "last_name-first_name-index",
                        "Projection": {
                            "ProjectionType": "ALL",
                            "NonKeyAttributes": []
                        },
                        "KeySchema": [
                            {
                                "KeyType": "HASH",
                                "AttributeName": "last_name"
                            },
                            {
                                "KeyType": "RANGE",
                                "AttributeName": "first_name"
                            }
                        ],
                        "WarmThroughput": {
                            "ReadUnitsPerSecond": 12000,
                            "WriteUnitsPerSecond": 4000
                        },
                        "ContributorInsightsSpecification": {
                            "Enabled": false
                        }
                    }
                ],
                "KeySchema": [
                    {
                        "KeyType": "HASH",
                        "AttributeName": "medical_record_number"
                    },
                    {
                        "KeyType": "RANGE",
                        "AttributeName": "date_time"
                    }
                ],
                "DeletionProtectionEnabled": false,
                "TableClass": "STANDARD",
                "Tags": [],
                "TimeToLiveSpecification": {
                    "Enabled": false
                }
            }
        }
    }
}